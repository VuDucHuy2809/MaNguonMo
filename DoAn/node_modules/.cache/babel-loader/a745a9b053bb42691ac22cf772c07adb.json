{"ast":null,"code":"import _defineProperty from\"C:/xampp/htdocs/\\u0110\\u1ED3 \\xE1n M\\xE3 Ngu\\u1ED3n M\\u1EDF/MaNguonMo/DoAn/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"C:/xampp/htdocs/\\u0110\\u1ED3 \\xE1n M\\xE3 Ngu\\u1ED3n M\\u1EDF/MaNguonMo/DoAn/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/xampp/htdocs/\\u0110\\u1ED3 \\xE1n M\\xE3 Ngu\\u1ED3n M\\u1EDF/MaNguonMo/DoAn/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/xampp/htdocs/\\u0110\\u1ED3 \\xE1n M\\xE3 Ngu\\u1ED3n M\\u1EDF/MaNguonMo/DoAn/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from'axios';import React,{useEffect,useState,useReducer,useContext}from'react';import{Link,Navigate,useNavigate}from'react-router-dom';import{Store}from'../../../Store';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Chekout(){var navigate=useNavigate();var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var cartItems=state.cart.cartItems;var updateCartHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(item,quantity){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/products/\".concat(item._id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!(data.countInStock<quantity)){_context.next=7;break;}window.alert('Sorry. product is out of stock');return _context.abrupt(\"return\");case 7:ctxDispatch({type:'CART_ADD_ITEM',payload:_objectSpread(_objectSpread({},item),{},{quantity:quantity})});case 8:case\"end\":return _context.stop();}}},_callee);}));return function updateCartHandler(_x,_x2){return _ref.apply(this,arguments);};}();var removeItemHandler=function removeItemHandler(item){ctxDispatch({type:'CART_REMOVE_ITEM',payload:item});};var checkoutHandler=function checkoutHandler(){navigate('/signin?redirect=/shipping');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{class:\"breadcrumbs\",children:/*#__PURE__*/_jsx(\"div\",{class:\"container\",children:/*#__PURE__*/_jsxs(\"ol\",{class:\"breadcrumb breadcrumb1 animated wow slideInLeft\",\"data-wow-delay\":\".5s\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"a\",{href:\"index.html\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"glyphicon glyphicon-home\",\"aria-hidden\":\"true\"}),\"Home\"]})}),/*#__PURE__*/_jsx(\"li\",{class:\"active\",children:\"Checkout Page\"})]})})}),/*#__PURE__*/_jsx(\"div\",{class:\"checkout\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"container\",children:[/*#__PURE__*/_jsxs(\"h3\",{class:\"animated wow slideInLeft\",\"data-wow-delay\":\".5s\",children:[\"Your shopping cart contains: \",/*#__PURE__*/_jsx(\"span\",{children:\"3 Products\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"checkout-right animated wow slideInUp\",\"data-wow-delay\":\".5s\",children:/*#__PURE__*/_jsxs(\"table\",{class:\"timetable_sub\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"SL No.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quality\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Product Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Service Charges\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Remove\"})]})}),cartItems.length===0?/*#__PURE__*/_jsxs(\"div\",{children:[\"Cart is emty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go shopping\"})]}):/*#__PURE__*/_jsx(_Fragment,{children:cartItems.map(function(item){var _jsx2;return/*#__PURE__*/_jsxs(\"tr\",{class:\"rem1\",children:[/*#__PURE__*/_jsx(\"td\",{class:\"invert\",children:\"1\"}),/*#__PURE__*/_jsx(\"td\",{class:\"invert-image\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:\" \",class:\"img-responsive\"})})}),/*#__PURE__*/_jsx(\"td\",{class:\"invert\",children:/*#__PURE__*/_jsx(\"div\",{class:\"quantity\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"quantity-select\",children:[/*#__PURE__*/_jsx(\"button\",(_jsx2={class:\"entry value\",onClick:function onClick(){return updateCartHandler(item,item.quantity-1);},disabled:item.quantity===1},_defineProperty(_jsx2,\"class\",\"entry value-minus\"),_defineProperty(_jsx2,\"children\",\"\\xA0\"),_jsx2)),/*#__PURE__*/_jsx(\"div\",{class:\"entry value\",children:/*#__PURE__*/_jsx(\"span\",{children:item.quantity})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return updateCartHandler(item,item.quantity+1);},disabled:item.quantity===item.countStock,class:\"entry value-plus active\",children:\"\\xA0\"})]})})}),/*#__PURE__*/_jsx(\"td\",{class:\"invert\",children:item.name}),/*#__PURE__*/_jsx(\"td\",{class:\"invert\",children:\"$5.00\"}),/*#__PURE__*/_jsx(\"td\",{class:\"invert\",children:item.price}),/*#__PURE__*/_jsx(\"td\",{class:\"invert\",children:/*#__PURE__*/_jsx(\"div\",{class:\"rem\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btnAdd\",onClick:function onClick(){return removeItemHandler(item);},children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-trash\"})})})})]},item._id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{class:\"checkout-left\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"checkout-left-basket animated wow slideInLeft\",\"data-wow-delay\":\".5s\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Continue to basket\"}),/*#__PURE__*/_jsx(\"ul\",{children:cartItems.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{children:[item.name,\" \",/*#__PURE__*/_jsxs(\"i\",{children:[\"x\",item.quantity]}),\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",item.price*item.quantity,\" \"]})]});})}),/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsxs(\"li\",{children:[\"Total \",/*#__PURE__*/_jsx(\"i\",{children:\"-\"}),\" \",/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",cartItems.reduce(function(a,c){return a+c.price*c.quantity;},0)]})]})})]}),/*#__PURE__*/_jsx(\"div\",{class:\"checkout-right-basket animated wow slideInRight\",\"data-wow-delay\":\".5s\",children:/*#__PURE__*/_jsx(\"button\",{disabled:cartItems.length===0,onClick:checkoutHandler,className:\"btnAdd\",children:/*#__PURE__*/_jsxs(\"a\",{children:[/*#__PURE__*/_jsx(\"span\",{class:\"glyphicon glyphicon-menu-left\",\"aria-hidden\":\"true\"}),\"Continue Shopping\"]})})}),/*#__PURE__*/_jsx(\"div\",{class:\"clearfix\",children:\" \"})]})]})})]});}export default Chekout;","map":{"version":3,"names":["axios","React","useEffect","useState","useReducer","useContext","Link","Navigate","useNavigate","Store","Chekout","navigate","state","ctxDispatch","dispatch","cartItems","cart","updateCartHandler","item","quantity","get","_id","data","countInStock","window","alert","type","payload","removeItemHandler","checkoutHandler","length","map","image","countStock","name","price","reduce","a","c"],"sources":["C:/xampp/htdocs/Đồ án Mã Nguồn Mở/MaNguonMo/DoAn/src/components/mainpages/cart/Chekout.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, {useEffect, useState, useReducer, useContext } from 'react'\r\nimport { Link, Navigate, useNavigate } from 'react-router-dom';\r\nimport {Store} from '../../../Store'\r\n\r\nfunction Chekout() {\r\n  const navigate = useNavigate();\r\n  const {state, dispatch: ctxDispatch} = useContext(Store);\r\n  const {\r\n    cart: { cartItems },\r\n  } = state ;\r\n  const updateCartHandler = async (item, quantity) => {\r\n    const { data } = await axios.get(`/api/products/${item._id}`);\r\n    if(data.countInStock < quantity ) {\r\n        window.alert('Sorry. product is out of stock');\r\n        return ;\r\n    }\r\n    ctxDispatch({\r\n      type: 'CART_ADD_ITEM',\r\n      payload: {...item,quantity},\r\n    });\r\n  }\r\n  const removeItemHandler = (item) => {\r\n    ctxDispatch({ type: 'CART_REMOVE_ITEM', payload: item });\r\n  };\r\n  const checkoutHandler = () => {\r\n    navigate('/signin?redirect=/shipping');\r\n  };\r\n  return (\r\n    <div>\r\n      <div class=\"breadcrumbs\">\r\n        <div class=\"container\">\r\n          <ol class=\"breadcrumb breadcrumb1 animated wow slideInLeft\" data-wow-delay=\".5s\">\r\n            <li><a href=\"index.html\"><span class=\"glyphicon glyphicon-home\" aria-hidden=\"true\"></span>Home</a></li>\r\n            <li class=\"active\">Checkout Page</li>\r\n          </ol>\r\n        </div>\r\n      </div>\r\n      <div class=\"checkout\">\r\n        <div class=\"container\">\r\n          <h3 class=\"animated wow slideInLeft\" data-wow-delay=\".5s\">Your shopping cart contains: <span>3 Products</span></h3>\r\n          <div class=\"checkout-right animated wow slideInUp\" data-wow-delay=\".5s\">\r\n            <table class=\"timetable_sub\">\r\n              <thead>\r\n                <tr>\r\n                  <th>SL No.</th>\t\r\n                  <th>Product</th>\r\n                  <th>Quality</th>\r\n                  <th>Product Name</th>\r\n                  <th>Service Charges</th>\r\n                  <th>Price</th>\r\n                  <th>Remove</th>\r\n                </tr>\r\n              </thead>\r\n              {cartItems.length === 0 ? (\r\n                <div>Cart is emty. <Link to=\"/\">Go shopping</Link></div>\r\n              ):\r\n              ( \r\n                <>\r\n                  {cartItems.map((item) => (\r\n                    <tr key={item._id} class=\"rem1\">\r\n                      <td class=\"invert\">1</td>\r\n                      <td class=\"invert-image\"><Link to=\"/\"><img src={item.image} alt=\" \" class=\"img-responsive\" /></Link></td>\r\n                      <td class=\"invert\">\r\n                        <div class=\"quantity\"> \r\n                          <div class=\"quantity-select\">                           \r\n                            <button class=\"entry value\" onClick={() => updateCartHandler(item,item.quantity - 1)} disabled={item.quantity === 1} class=\"entry value-minus\">&nbsp;</button>\r\n                            <div class=\"entry value\"><span>{item.quantity}</span></div>\r\n                            <button onClick={() => updateCartHandler(item,item.quantity + 1)} disabled={item.quantity === item.countStock} class=\"entry value-plus active\">&nbsp;</button>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                      <td class=\"invert\">{item.name}</td>\r\n                      <td class=\"invert\">$5.00</td>\r\n                      <td class=\"invert\">{item.price}</td>\r\n                      <td class=\"invert\">\r\n                        <div class=\"rem\">\r\n                          <button className='btnAdd' onClick={() => removeItemHandler(item)}>\r\n                            <i class=\"fa-solid fa-trash\"></i>\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}      \r\n                </>\r\n              )}\r\n            </table>\r\n          </div>\r\n          <div class=\"checkout-left\">\t\r\n            <div class=\"checkout-left-basket animated wow slideInLeft\" data-wow-delay=\".5s\">\r\n              <h4>Continue to basket</h4>\r\n                <ul>\r\n                  {cartItems.map((item) => (\r\n                    <li>{item.name} <i>x{item.quantity}</i> <span>${item.price * item.quantity} </span></li>\r\n                  ))}\r\n                </ul>\r\n              <ul>\r\n                <li>Total <i>-</i> <span>${cartItems.reduce((a, c)=> a+ c.price * c.quantity, 0)}</span></li>\r\n              </ul>\r\n            </div>\r\n            <div class=\"checkout-right-basket animated wow slideInRight\" data-wow-delay=\".5s\">\r\n              <button disabled={cartItems.length === 0} onClick={checkoutHandler} className='btnAdd'><a><span class=\"glyphicon glyphicon-menu-left\" aria-hidden=\"true\"></span>Continue Shopping</a></button>\r\n            </div>\r\n            <div class=\"clearfix\"> </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Chekout"],"mappings":"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"},"metadata":{},"sourceType":"module"}