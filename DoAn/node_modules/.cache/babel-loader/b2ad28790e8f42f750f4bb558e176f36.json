{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\\\u0110\\u1ED3 \\xE1n M\\xE3 Ngu\\u1ED3n M\\u1EDF\\\\MaNguonMo\\\\DoAn\\\\src\\\\components\\\\mainpages\\\\products\\\\ProductsMain2.js\",\n    _s = $RefreshSig$();\n\nimport { Link } from 'react-router-dom';\nimport Rating from './Rating';\nimport React, { useEffect, useState, useReducer, useContext } from 'react';\nimport { Store } from '../../../Store';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ProductsMain2(props) {\n  _s();\n\n  const {\n    product\n  } = props;\n  const {\n    state,\n    dispatch: ctxDispatch\n  } = useContext(Store);\n  const {\n    cart: {\n      cartItems\n    }\n  } = state;\n\n  const addToCartHandler = async () => {\n    const existItem = cartItems.find(x => x._id === product._id);\n    const quantity = existItem ? existItem.quantity + 1 : 1;\n    const {\n      data\n    } = await axios.get(`/api/products/${product._id}`);\n\n    if (data.countInStock < quantity) {\n      window.alert('Sorry . Product is out if stock');\n      return;\n    }\n\n    ctxDispatch({\n      type: 'CART_ADD_ITEM',\n      payload: { ...product,\n        quantity\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-3 new-collections-grid\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"new-collections-grid1 animated wow slideInUp\",\n        \"data-wow-delay\": \".5s\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"new-collections-grid1-image\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `products/${product.slug}`,\n            className: \"product-image\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: product.image,\n              alt: product.name,\n              className: \"img-responsive\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 33,\n              columnNumber: 81\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"new-collections-grid1-image-pos\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: `products/${product.slug}`,\n              children: \"Quick View\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 35,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 34,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"new-collections-grid1-right\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rating\",\n              children: [/*#__PURE__*/_jsxDEV(Rating, {\n                rating: product.rating,\n                numReviews: product.numReviews\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 39,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"clearfix\",\n                children: \" \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 40,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 38,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: `/product/${product._id}`,\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: product.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"new-collections-grid1-left simpleCart_shelfItem\",\n          children: product.countInStock <= 0 ? /*#__PURE__*/_jsxDEV(\"span\", {\n            class: \"badge bg-success\",\n            children: \"on Stock\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 46\n          }, this) :\n          /*#__PURE__*/\n          // <p><i>$340</i> <span className=\"item_price\">${product.price}</span><button className='btnAdd' onClick={() => addToCartHandler(product)}><p><a>Add sto cart</a></p></button></p>\n          _jsxDEV(\"span\", {\n            class: \"badge bg-success\",\n            children: \"In Stock\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProductsMain2, \"Km7hoU2T3XMJ0JgKDP3546otleQ=\");\n\n_c = ProductsMain2;\nexport default ProductsMain2;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductsMain2\");","map":{"version":3,"names":["Link","Rating","React","useEffect","useState","useReducer","useContext","Store","axios","ProductsMain2","props","product","state","dispatch","ctxDispatch","cart","cartItems","addToCartHandler","existItem","find","x","_id","quantity","data","get","countInStock","window","alert","type","payload","slug","image","name","rating","numReviews","description"],"sources":["C:/xampp/htdocs/Đồ án Mã Nguồn Mở/MaNguonMo/DoAn/src/components/mainpages/products/ProductsMain2.js"],"sourcesContent":["import { Link } from 'react-router-dom';\r\nimport Rating from './Rating';\r\nimport React, {useEffect, useState, useReducer, useContext } from 'react'\r\nimport { Store } from '../../../Store';\r\nimport axios from 'axios';\r\n\r\nfunction ProductsMain2(props) {\r\n    const {product} = props;\r\n    const {state, dispatch: ctxDispatch} = useContext(Store);\r\n    const {\r\n        cart: { cartItems},\r\n    } = state;\r\n\r\n    const addToCartHandler = async () => {\r\n        const existItem = cartItems.find((x) => x._id === product._id);\r\n        const quantity = existItem ? existItem.quantity + 1 : 1;\r\n        const {data} = await axios.get(`/api/products/${product._id}`);\r\n        if(data.countInStock < quantity ){\r\n            window.alert('Sorry . Product is out if stock');\r\n            return ;\r\n        }\r\n        ctxDispatch({\r\n            type: 'CART_ADD_ITEM',\r\n            payload: {...product,quantity},\r\n        });\r\n    }\r\n  return (\r\n    <div>\r\n        {/* <h4><Link to={`/products/${product._id}`}>{product.name}</Link></h4> */}\r\n        <div  className=\"col-md-3 new-collections-grid\">\r\n        <div className=\"new-collections-grid1 animated wow slideInUp\" data-wow-delay=\".5s\">\r\n            <div className=\"new-collections-grid1-image\">\r\n                <Link to={`products/${product.slug}`} className=\"product-image\"><img src={product.image} alt={product.name} className=\"img-responsive\" /></Link>\r\n                <div className=\"new-collections-grid1-image-pos\">\r\n                    <Link to={`products/${product.slug}`}>Quick View</Link>\r\n                </div>\r\n                <div className=\"new-collections-grid1-right\">\r\n                    <div className=\"rating\">\r\n                        <Rating rating = {product.rating} numReviews={product.numReviews}></Rating>\r\n                        <div className=\"clearfix\"> </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <h4><Link to={`/product/${product._id}`}>{product.name}</Link></h4>\r\n            <p>{product.description}</p>\r\n            <div className=\"new-collections-grid1-left simpleCart_shelfItem\">\r\n                {product.countInStock <= 0 ? <span class=\"badge bg-success\">on Stock</span>\r\n                :\r\n                    // <p><i>$340</i> <span className=\"item_price\">${product.price}</span><button className='btnAdd' onClick={() => addToCartHandler(product)}><p><a>Add sto cart</a></p></button></p>\r\n                    <span class=\"badge bg-success\">In Stock</span>\r\n                }\r\n            </div>\r\n        </div>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProductsMain2\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}